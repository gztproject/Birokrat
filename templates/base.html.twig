{#
   This is the base template used as the application layout which contains the
   common elements and decorates all the other templates.
   See https://symfony.com/doc/current/book/templating.html#template-inheritance-and-layouts
#}
<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>{% block title %}GZT Birokrat{% endblock %}</title>
        
        {% block stylesheets %} 
        
            {{ encore_entry_link_tags('css/app') }}        
            {{ encore_entry_link_tags('css/copyleft') }}
        {% endblock %}

        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>

    <body id="{% block body_id %}{% endblock %}">

        {% block header %}
            <header>
                <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary" role="navigation">
                    <div class="container">
                        <a href="{{ path('dashboard_index') }}" class="navbar-brand">Birokrat</a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        
                        <div class="navbar-collapse collapse" id="navbarResponsive">
                            <ul class="navbar-nav navbar-right">

                                {% block header_navigation_links %}
                                    {% if app.user %}
                                        <li class="nav-item active">
                                            <a class="nav-link" href="{{ path('dashboard_index') }}">
                                                <i class="fa fa-home" aria-hidden="true"></i> {{ 'menu.home'|trans }}
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if is_granted('ROLE_ADMIN') %}
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="{{ path('admin_index') }}">
                                                <i class="fa fa-lock" aria-hidden="true"></i> {{ 'menu.admin'|trans }}                                                
                                            </a>
                                            <div class="dropdown-menu" aria-labelledby="admin">
                                                <a class="dropdown-item" href="{{ path('admin_index') }}">{{ 'menu.admin'|trans }}</a>
                                                <div class="dropdown-divider"></div>
                                                <a class="dropdown-item" href="{{ path('admin_user_index') }}">{{ 'menu.users'|trans }}</a>
                                            </div>
                                        </li>
                                    {% endif %}
                                {% endblock %}
                                {% if app.user %}
                                    <li class="nav-item">
                                        <a class="nav-link" href="{{ path('POC_index') }}"> <i class="fa fa-hand-spock"></i> {{ 'menu.POC'|trans }}</a>
                                    </li>                                
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-expanded="false" id="user">
                                            <i class="fa fa-user" aria-hidden="true"></i>
                                            {{ app.user.fullname }}
                                        </a>
                                        <ul class="dropdown-menu user" role="menu" aria-labelledby="user">
                                            <li>
                                                <a class="nav-link" href="{{ path('admin_user_show', {'id': app.user.id}) }}">
                                                    <i class="fa fa-edit" aria-hidden="true"></i> {{ 'menu.user'|trans }}
                                                </a>
                                            </li>
                                            <li class="divider"></li>
                                            <li>
                                                <a class="nav-link" href="{{ path('app_logout') }}">
                                                    <i class="fa fa-sign-out-alt" aria-hidden="true"></i> {{ 'menu.logout'|trans }}
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                

                                <li class="nav-item dropdown">
                                    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" id="locales">
                                        <i class="fa fa-globe" aria-hidden="true"></i>
                                        {{ app.request.locale }}
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="locales">
                                        {% for locale in locales() %}
                                            <a class="dropdown-item" {% if app.request.locale == locale.code %}aria-checked="true" class="active"{% else %}aria-checked="false" {% endif %} href="{{ path(app.request.get('_route', 'blog_index'), app.request.get('_route_params', [])|merge({_locale: locale.code})) }}">{{ locale.name|capitalize }}</a>
                                        {% endfor %}
                                    </div>
                                </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </nav>
            </header>
        {% endblock %}

        <div class="container-fluid">
            {% block body %}
                <div class="row">
                    <div id="main" class="col-sm-9">
                        {{ include('default/_flash_messages.html.twig') }}

                        {% block main %}{% endblock %}
                    </div>

                    <div id="sidebar" class="col-sm-3">
                        {% block sidebar %}
                            
                        {% endblock %}
                    </div>
                </div>
            {% endblock %}
        </div>

        {% block footer %}
            <footer class="page-footer fixed-bottom font-small stylish-color-dark pt-4">
                <div class="container">
                    <div class="row">
                        <div id="footer-copyright" class="col-md-6">                        
                            <p><span class="copyleft">&copy;</span> {{ 'now'|date('Y') }} - GZT Project</p>
                        </div>
                        <div id="footer-resources" class="col-md-6">                            
                        </div>
                    </div>
                </div>
            </footer>
        {% endblock %}

        {% block javascripts %}
            {{ encore_entry_script_tags('js/app') }}
        {% endblock %}

        {# it's not mandatory to set the timezone in localizeddate(). This is done to
           avoid errors when the 'intl' PHP extension is not available and the application
           is forced to use the limited "intl polyfill", which only supports UTC and GMT #}
        <!-- Page rendered on {{ 'now'|localizeddate('long', 'long', null, 'UTC') }} -->
    </body>
</html>
